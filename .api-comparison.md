# API Endpoint Comparison: Version A (Node.js) vs Version C (Python)

## Summary
| Metric | Version A (Node.js) | Version C (Python) |
|--------|---------------------|-------------------|
| Total Endpoints | ~75 | 12 |
| Feature Areas | 12 | 3 |
| Production Ready | No (Clerk/Replit deps) | Partial |

---

## Version C (Python/FastAPI) - Currently Deployed

### Video Routes (`/video/*`)
| Method | Path | Status |
|--------|------|--------|
| GET | `/video` | ✅ Working |
| GET | `/video/{id}` | ✅ Working |
| PATCH | `/video/{id}` | ✅ Working |
| POST | `/video/upload` | ✅ Working |
| POST | `/video/ingest` | ✅ Working |
| POST | `/video/caption` | ✅ Working (n8n) |
| POST | `/video/metadata/generate` | ✅ Working (OpenRouter) |

### YouTube Routes (`/youtube/*`)
| Method | Path | Status |
|--------|------|--------|
| GET | `/youtube/status` | ✅ Working |
| POST | `/youtube/auth/start` | ⚠️ Needs testing |
| POST | `/youtube/auth/callback` | ⚠️ Needs testing |
| POST | `/youtube/publish` | ⚠️ Needs testing |

### Other
| Method | Path | Status |
|--------|------|--------|
| GET | `/api/health` | ✅ Working |
| GET | `/uploads/*` | ✅ Static files |

---

## Version A (Node.js) - Full Feature Set

### Authentication & User
| Method | Path | In Version C? | Dependency |
|--------|------|---------------|------------|
| GET | `/api/clerk-config` | ❌ | Clerk |
| GET | `/api/auth/user` | ❌ | Clerk |
| GET | `/api/login` | ❌ | Replit Auth |
| GET | `/api/callback` | ❌ | Replit Auth |
| GET | `/api/logout` | ❌ | Session |
| POST | `/api/bootstrap-superadmin` | ❌ | - |

### Video Management
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/videos/upload` | ✅ | `/video/upload` |
| GET | `/api/videos` | ✅ | `/video` |
| GET | `/api/videos/:id` | ✅ | `/video/{id}` |
| GET | `/api/videos/:id/status` | ❌ | Missing |
| PATCH | `/api/videos/:id` | ✅ | `/video/{id}` |
| POST | `/api/videos/:id/speaker-image` | ❌ | Missing |
| POST | `/api/videos/:id/upload-thumbnail` | ❌ | Missing |

### Video Analysis (AI)
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/videos/:id/analyze-content-start` | ❌ | Missing |
| POST | `/api/videos/:id/analyze-content-end` | ❌ | Missing |
| PATCH | `/api/videos/:id/trim` | ❌ | Missing |
| POST | `/api/videos/:id/generate-metadata` | ✅ | `/video/metadata/generate` |
| POST | `/api/videos/:id/generate-thumbnail` | ❌ | Missing |

### Video Clips
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/videos/:id/clips` | ❌ | Missing |
| POST | `/api/videos/:id/suggest-clips` | ❌ | Missing |
| POST | `/api/videos/:id/clips` | ❌ | Missing (create clip) |

### Confidentiality Check
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/videos/:id/confidentiality-check` | ❌ | Missing |
| GET | `/api/videos/:id/confidentiality-check` | ❌ | Missing |

### YouTube Publishing
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/videos/:id/publish` | ✅ | `/youtube/publish` |

### Admin - Users
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/admin/users` | ❌ | Missing |
| POST | `/api/admin/users` | ❌ | Missing |
| PATCH | `/api/admin/users/:userId` | ❌ | Missing |
| PATCH | `/api/admin/users/:userId/role` | ❌ | Missing |
| PATCH | `/api/admin/users/:userId/default-channel` | ❌ | Missing |
| DELETE | `/api/admin/users/:userId` | ❌ | Missing |

### Admin - Channels
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/admin/channels` | ❌ | Missing |
| POST | `/api/admin/channels` | ❌ | Missing |
| DELETE | `/api/admin/channels/:channelId` | ❌ | Missing |
| POST | `/api/admin/users/:userId/channels` | ❌ | Missing |
| DELETE | `/api/admin/users/:userId/channels/:channelId` | ❌ | Missing |

### Admin - Misc
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/admin/all-videos` | ❌ | Missing |
| POST | `/api/admin/seed` | ❌ | Missing |
| GET | `/api/admin/export-csv` | ❌ | Missing |

### User Info
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/my-channels` | ❌ | Missing |
| GET | `/api/me/publish-info` | ❌ | Missing |

### Workbook Features (Business Tools)
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/workbook/progress` | ❌ | Missing |
| POST | `/api/workbook/progress` | ❌ | Missing |
| GET | `/api/workbook/core-value` | ❌ | Missing |
| POST | `/api/workbook/core-value` | ❌ | Missing |
| GET | `/api/workbook/swot` | ❌ | Missing |
| GET | `/api/workbook/swot/all` | ❌ | Missing |
| POST | `/api/workbook/swot` | ❌ | Missing |
| GET | `/api/workbook/root-cause` | ❌ | Missing |
| POST | `/api/workbook/root-cause` | ❌ | Missing |
| GET | `/api/workbook/time-audit` | ❌ | Missing |
| POST | `/api/workbook/time-audit` | ❌ | Missing |
| GET | `/api/workbook/action-plan` | ❌ | Missing |
| POST | `/api/workbook/action-plan` | ❌ | Missing |
| POST | `/api/workbook/ai-coach` | ❌ | Missing |

### Cloud Storage - Dropbox
| Method | Path | In Version C? | Dependency |
|--------|------|---------------|------------|
| GET | `/api/dropbox/status` | ❌ | Replit Dropbox |
| GET | `/api/dropbox/files` | ❌ | Replit Dropbox |
| GET | `/api/dropbox/download-link` | ❌ | Replit Dropbox |
| POST | `/api/dropbox/connect` | ❌ | Replit Dropbox |
| POST | `/api/dropbox/select-folder` | ❌ | Replit Dropbox |
| GET | `/api/dropbox/search-videos` | ❌ | Replit Dropbox |

### Cloud Connections
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/cloud-connections` | ❌ | Missing |

### Video Ingest (Cloud Import)
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/ingest-requests` | Partial | `/video/ingest` |
| GET | `/api/ingest-requests` | ❌ | Missing |
| GET | `/api/ingest-requests/:id` | ❌ | Missing |
| DELETE | `/api/ingest-requests/:id` | ❌ | Missing |

### Semantic Search
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/search` | ❌ | Missing |
| GET | `/api/search/history` | ❌ | Missing |

### Leads Management
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/leads/clients` | ❌ | Missing |
| POST | `/api/leads/clients` | ❌ | Missing |
| DELETE | `/api/leads/clients/:id` | ❌ | Missing |
| GET | `/api/leads/clients/:id/swot` | ❌ | Missing |
| POST | `/api/leads/clients/:id/swot` | ❌ | Missing |
| GET | `/api/leads/clients/:id/searches` | ❌ | Missing |
| POST | `/api/leads/clients/:id/search` | ❌ | Missing |
| POST | `/api/leads/webhook/results` | ❌ | Missing |

### Business Intelligence
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/intel/callback` | ❌ | n8n webhook |
| POST | `/api/intel/analyze` | ❌ | Missing |
| GET | `/api/intel/results/:clientBusinessId` | ❌ | Missing |

### Chat/Conversations
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| GET | `/api/conversations` | ❌ | Missing |
| GET | `/api/conversations/:id` | ❌ | Missing |
| POST | `/api/conversations` | ❌ | Missing |
| DELETE | `/api/conversations/:id` | ❌ | Missing |
| POST | `/api/conversations/:id/messages` | ❌ | Missing |

### Image Generation
| Method | Path | In Version C? | Notes |
|--------|------|---------------|-------|
| POST | `/api/generate-image` | ❌ | Missing |

---

## Feature Gap Analysis

### Core Video Features (Priority 1)
| Feature | Gap | Effort |
|---------|-----|--------|
| Video status endpoint | Missing | Low |
| Speaker image upload | Missing | Low |
| Thumbnail upload | Missing | Low |
| Analyze content (AI) | Missing | Medium |
| Trim video | Missing | Medium |
| Generate thumbnail | Missing | Medium |
| Clips management | Missing | High |

### Admin Features (Priority 2)
| Feature | Gap | Effort |
|---------|-----|--------|
| User management | Missing | Medium |
| Channel management | Missing | Medium |
| All videos view | Missing | Low |
| CSV export | Missing | Low |

### Cloud Storage (Priority 3)
| Feature | Gap | Effort |
|---------|-----|--------|
| Dropbox integration | Needs rewrite | High |
| Google Drive | Not in A | Medium |
| Cloud connections | Missing | Medium |
| Ingest queue | Partial | Medium |

### Business Tools (Priority 4)
| Feature | Gap | Effort |
|---------|-----|--------|
| Workbook progress | Missing | Medium |
| Core values | Missing | Medium |
| SWOT analysis | Missing | Medium |
| Root cause | Missing | Medium |
| Time audit | Missing | Medium |
| Action plan | Missing | Medium |
| AI Coach | Missing | High |

### Leads/Intel (Priority 5)
| Feature | Gap | Effort |
|---------|-----|--------|
| Leads clients | Missing | Medium |
| SWOT per client | Missing | Medium |
| Lead searches | Missing | High |
| Business intel | Missing | High |

### Other Features (Priority 6)
| Feature | Gap | Effort |
|---------|-----|--------|
| Semantic search | Missing | High |
| Confidentiality check | Missing | Medium |
| Chat/conversations | Missing | Medium |
| Image generation | Missing | Low |

---

## Dependencies to Address

### 1. Auth System
- Version A uses **Clerk** (production) or **Replit Auth** (dev)
- Version C uses **custom JWT/header auth**
- **Decision needed**: Keep custom auth or integrate Clerk?

### 2. Dropbox Integration
- Version A uses **Replit-specific Dropbox connector**
- Version C has **no Dropbox**
- **Needs**: Standard Dropbox OAuth implementation

### 3. AI Services
- Version A: Unknown AI provider
- Version C: OpenRouter (working)
- **Good**: Can use OpenRouter for all AI features

### 4. n8n Integration
- Version C already has n8n for transcription
- **Opportunity**: Use n8n for more automation (leads, intel, etc.)

---

## Recommended Migration Path

### Phase 1: Complete Core Video (Est. 15 endpoints)
1. Add missing video endpoints (status, speaker-image, thumbnail)
2. Add analyze-content endpoints (start/end)
3. Add trim endpoint
4. Add clips endpoints

### Phase 2: Admin Features (Est. 12 endpoints)
1. Add user management endpoints
2. Add channel management endpoints
3. Add admin utility endpoints (all-videos, export-csv)

### Phase 3: Cloud Storage (Est. 8 endpoints)
1. Implement Dropbox OAuth (not Replit connector)
2. Add cloud-connections endpoint
3. Enhance ingest-requests with full CRUD

### Phase 4: Business Tools (Est. 14 endpoints)
1. Add workbook progress tracking
2. Add all workbook feature endpoints
3. Add AI coach endpoint

### Phase 5: Leads & Intel (Est. 10 endpoints)
1. Add leads client management
2. Add leads search features
3. Add business intel integration (n8n)

### Phase 6: Additional Features (Est. 7 endpoints)
1. Add semantic search
2. Add confidentiality check
3. Add chat/conversations
4. Add image generation
