# Schema Comparison: Production (Clerk) vs Replit (Current)

## Summary
- **Production (Clerk)**: 18 tables - focused on Video Studio + Workbook features
- **Replit (askstephen)**: 28 tables - adds Leads/Competitor features

## Tables in BOTH schemas (core features):
| Table | Purpose |
|-------|---------|
| users | User accounts |
| videos | Video files and metadata |
| video_ingest_requests | Cloud import tracking |
| cloud_connections | GDrive/Dropbox connections |
| confidentiality_checks | AI content review |
| youtube_channels | YouTube channel info |
| user_channels | User-channel associations |
| sessions | Session storage |
| conversations | Chat conversations |
| messages | Chat messages |
| search_queries | Search history |
| workbook_progress | Business workbook progress |
| action_plans | Strategic action plans |
| ai_coach_conversations | AI coaching sessions |
| core_values | Business core values |
| root_cause_charts | Problem analysis |
| time_audits | Time management |
| workbook_swot_analyses | SWOT analysis |

## Tables ONLY in Replit (10 extra - Leads/Competitor features):
| Table | Purpose |
|-------|---------|
| companies | Company profiles |
| company_memberships | Team/company membership |
| business_leads | Lead records |
| leads_clients | Leads module clients |
| leads_searches | Lead search jobs |
| leads_search_schedules | Scheduled searches |
| leads_swot_analyses | Lead-specific SWOT |
| competitor_snapshots | Competitor data snapshots |
| competitor_changes | Competitor change tracking |
| referral_partner_categories | Referral partner types |

## Tables ONLY in current backend models (not in either DB):
| Table | Purpose |
|-------|---------|
| user_social_accounts | YouTube/social OAuth tokens (replaces Clerk) |
| oauth_states | OAuth flow state tracking |

## Key Insight:
- Production used **Clerk** for auth → no need for oauth_states/user_social_accounts
- Replit version removed Clerk → added custom OAuth tables
- Replit version added **Leads/Competitor tracking** features (10 tables)

## What's Working Now:
The `askstephen` database has ALL 28 tables from Replit + the 2 OAuth tables from the backend models.
This is the most complete version.

## Missing from Backend Code:
The Python backend models.py only defines:
- User, Video, VideoIngestRequest, CloudConnection
- ConfidentialityCheck (referenced but not fully defined)
- UserSocialAccount, OAuthState

It does NOT have models for:
- Workbook features (action_plans, core_values, etc.)
- Leads features (companies, business_leads, etc.)
- Competitor features

These tables exist in the DB but the API doesn't expose them yet.
